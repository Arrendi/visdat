<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Using visdat &bull; visdat</title><!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">visdat</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/tierneyn/visdat">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Using visdat</h1>
                        <h4 class="author">Nicholas Tierney</h4>
            
            <h4 class="date">2016-11-05</h4>
          </div>

    
    
<div class="contents">
<div id="visdat" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#visdat" class="anchor"> </a></body></html>visdat</h1>
</div>
<div id="what-does-visdat-do" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#what-does-visdat-do" class="anchor"> </a></body></html>What does visdat do?</h1>
<p>Initially inspired by <a href="https://github.com/setosa/csv-fingerprint"><code>csv-fingerprint</code></a>, <code>vis_dat</code> helps visualise a dataframe in a heatmap-like fashion, allowing you to &ldquo;get a look at the data&rdquo;, by displaying the variable classes in a dataframe as a plot with <code>vis_dat</code>, and getting a brief look into missing data patterns <code>vis_miss</code>.</p>
<p>There have been 6 phases of data science <a href="http://r4ds.had.co.nz/introduction.html">1</a> described, being:</p>
<p><a href="">image from this datascience page with reference</a></p>
<p>Where Wickham describes that you can get insight into your data by modelling, visualising, and transforming, which he describes as &ldquo;Understanding&rdquo; or &ldquo;knowledge generation&rdquo;. There is some overlap here, as in this process it wouldn&rsquo;t be surprising that you might uncover some feature of your dataset that you would need to clean up - you might discover that some strings were indeed factors, or that gender was considered numeric in your regression, warranting you to re-visit the Tidying phase.</p>
<p>In the same way, I think that this process gets applied in the Tidying step of data science. You read in your data, but you then need to look at it to understand what you need to do to &ldquo;fix it&rdquo;. And that&rsquo;s a key phrase here &ldquo;looking at the data&rdquo; - what does that mean?</p>
<p>On one hand, you can look at the head of the data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(iris)</code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Or you can have a <code>glimpse</code> at it through <code>tibble</code>/<code>dplyr</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tibble::<span class="kw">glimpse</span>(iris)</code></pre></div>
<pre><code>## Observations: 150
## Variables: 5
## $ Sepal.Length &lt;dbl&gt; 5.1, 4.9, 4.7, 4.6, 5.0, 5.4, 4.6, 5.0, 4.4, 4.9,...
## $ Sepal.Width  &lt;dbl&gt; 3.5, 3.0, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1,...
## $ Petal.Length &lt;dbl&gt; 1.4, 1.4, 1.3, 1.5, 1.4, 1.7, 1.4, 1.5, 1.4, 1.5,...
## $ Petal.Width  &lt;dbl&gt; 0.2, 0.2, 0.2, 0.2, 0.2, 0.4, 0.3, 0.2, 0.2, 0.1,...
## $ Species      &lt;fctr&gt; setosa, setosa, setosa, setosa, setosa, setosa, ...</code></pre>
<p>And we can see we have doubles, and a factor. And we get a little insight into the data.</p>
<p>But we don&rsquo;t always have data like iris, let&rsquo;s take a look at some data that might be a bit more typical of &ldquo;messy&rdquo; data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(visdat)
dplyr::<span class="kw">glimpse</span>(typical_data)</code></pre></div>
<pre><code>## Observations: 5,000
## Variables: 9
## $ ID         &lt;chr&gt; "0001", "0002", "0003", "0004", "0005", NA, "0007",...
## $ Race       &lt;fctr&gt; White, Hispanic, White, Black, White, Hispanic, Hi...
## $ Age        &lt;int&gt; 34, 25, 35, NA, NA, NA, 26, 31, 20, 26, NA, NA, 21,...
## $ Sex        &lt;fctr&gt; Female, Male, Male, Female, Male, Male, Male, Fema...
## $ Height(cm) &lt;dbl&gt; 181.6, 174.3, 171.9, 188.4, 171.1, 179.5, 175.8, 17...
## $ IQ         &lt;dbl&gt; 100, 100, 104, 116, 106, 105, 95, 98, 88, NA, 96, 1...
## $ Smokes     &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, FAL...
## $ Income     &lt;dbl&gt; 33873.82, 38799.39, 7235.28, 29629.44, 19990.00, 69...
## $ Died       &lt;lgl&gt; TRUE, TRUE, FALSE, TRUE, TRUE, FALSE, FALSE, TRUE, ...</code></pre>
<p>And you might then ask:</p>
<blockquote>
<p>Isn&rsquo;t it odd that Income is afactor? And Age is a character?</p>
</blockquote>
<p>The name <code>visdat</code> was chosen as it borrows from the idea of <a href="https://github.com/ropensci/testdat"><code>testdat</code></a>, which provides unit testing for your data. In a similar way, <code>visdat</code> provides visual tests for The idea being that first you visualise your data (<code>visdat</code>), then you run tests from <code>testdat</code> to fix them.</p>
<p>There are currently three main commands: <code>vis_dat</code>, <code>vis_miss</code>, and <code>vis_guess</code></p>
<ul><li><p><code>vis_dat</code> visualises a dataframe showing you what the classes of the columns are, and also displaying the missing data.</p></li>
<li><p><code>vis_miss</code> visualises just the missing data, and allows for missingness to be clustered and columns rearranged. <code>vis_miss</code> is similar to <code>missing.pattern.plot</code> from the <code>mi</code> package. Unfortunately <code>missing.pattern.plot</code> is no longer in the <code>mi</code> package (well, as of 14/02/2016).</p></li>
<li><p><code>vis_guess</code> has a guess at what the value of each cell. So &ldquo;10.1&rdquo; will return &ldquo;double&rdquo;, and <code>10.1</code> will return &ldquo;double&rdquo;, and <code>01/01/01</code> will return &ldquo;date&rdquo;. Keep in mind that it is a <strong>guess</strong> at what each cell is, so you can&rsquo;t trust this fully. <code>vis_guess</code> is made possible thanks to Hadley Wickham&rsquo;s <code>readr</code> package - thanks mate!</p></li>
</ul></div>
<div id="how-to-install" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#how-to-install" class="anchor"> </a></body></html>How to install</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>

<span class="kw">library</span>(devtools)

<span class="kw">install_github</span>(<span class="st">"njtierney/visdat"</span>)</code></pre></div>
</div>
<div id="examples" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#examples" class="anchor"> </a></body></html>Examples</h1>
<div id="using-vis_dat" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#using-vis_dat" class="anchor"> </a></body></html>Using <code>vis_dat</code></h2>
<p>Let&rsquo;s see what&rsquo;s inside the dataset <code>airquality</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(visdat)

<span class="kw"><a href="../reference/vis_dat.html">vis_dat</a></span>(airquality)</code></pre></div>
<p><img src="using_visdat_files/figure-html/vis_dat-1.png" width="672"></p>
<p>The classes are represented on the legend, and missing data represented by grey.</p>
<p>by default, <code>vis_dat</code> sorts the columns according to the type of the data in the vectors. You can turn this off by setting <code>sort_type == FALSE</code>. This feature is better illustrated using the <code>typical_data</code> dataset, created using <a href="github.com/trinker/wakefield">wakefield</a> and contained within visdat</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_dat.html">vis_dat</a></span>(typical_data)</code></pre></div>
<pre><code>## Warning: attributes are not identical across measure variables; they will
## be dropped</code></pre>
<p><img src="using_visdat_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_dat.html">vis_dat</a></span>(typical_data, 
        <span class="dt">sort_type =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## Warning: attributes are not identical across measure variables; they will
## be dropped</code></pre>
<p><img src="using_visdat_files/figure-html/unnamed-chunk-6-2.png" width="672"></p>
<p>The plot above tells us that R reads this dataset as having numeric and integer values, along with some missing data in <code>Ozone</code> and <code>Solar.R</code>.</p>
</div>
<div id="using-vis_miss" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#using-vis_miss" class="anchor"> </a></body></html>using <code>vis_miss</code></h2>
<p>We can explore the missing data further using <code>vis_miss</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_miss.html">vis_miss</a></span>(airquality)</code></pre></div>
<p><img src="using_visdat_files/figure-html/vis_miss-1.png" width="672"></p>
<p>The percentages of missing/complete in <code>vis_miss</code> are accurate to 1 decimal place.</p>
<p>You can cluster the missingness by setting <code>cluster = TRUE</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_miss.html">vis_miss</a></span>(airquality, 
         <span class="dt">cluster =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="using_visdat_files/figure-html/vis_miss-cluster-1.png" width="672"></p>
<p>The columns can also just be arranged by columns with most missingness, by setting <code>sort_miss = TRUE</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_miss.html">vis_miss</a></span>(airquality,
         <span class="dt">sort_miss =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="using_visdat_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
<p>When there is &lt;0.1% of missingness, <code>vis_miss</code> indicates that there is &gt;1% missingness.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_miss_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x1 =</span> <span class="dv">1</span>:<span class="dv">10000</span>,
                           <span class="dt">x2 =</span> <span class="kw">rep</span>(<span class="st">"A"</span>, <span class="dv">10000</span>),
                           <span class="dt">x3 =</span> <span class="kw">c</span>(<span class="kw">rep</span>(1L, <span class="dv">9999</span>), <span class="ot">NA</span>))

<span class="kw"><a href="../reference/vis_miss.html">vis_miss</a></span>(test_miss_df)</code></pre></div>
<pre><code>## Warning: attributes are not identical across measure variables; they will
## be dropped</code></pre>
<p><img src="using_visdat_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
<p><code>vis_miss</code> will also indicate when there is no missing data at all</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_miss.html">vis_miss</a></span>(mtcars)</code></pre></div>
<p><img src="using_visdat_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
</div>
<div id="using-vis_guess" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#using-vis_guess" class="anchor"> </a></body></html>using <code>vis_guess</code></h2>
<p><code>vis_guess</code> takes a guess at what each cell is. It&rsquo;s best illustrated using some messy data, which we&rsquo;ll make here.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">messy_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>,
                  T,
                  <span class="st">"TRUE"</span>,
                  <span class="st">"T"</span>,
                  <span class="st">"01/01/01"</span>,
                  <span class="st">"01/01/2001"</span>,
                  <span class="ot">NA</span>,
                  <span class="ot">NaN</span>,
                  <span class="st">"NA"</span>,
                  <span class="st">"Na"</span>,
                  <span class="st">"na"</span>,
                  <span class="st">"10"</span>,
                  <span class="dv">10</span>,
                  <span class="st">"10.1"</span>,
                  <span class="fl">10.1</span>,
                  <span class="st">"abc"</span>,
                  <span class="st">"$%TG"</span>)

messy_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">var1 =</span> messy_vector,
                       <span class="dt">var2 =</span> <span class="kw">sample</span>(messy_vector),
                       <span class="dt">var3 =</span> <span class="kw">sample</span>(messy_vector))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_guess.html">vis_guess</a></span>(messy_df)</code></pre></div>
<p><img src="using_visdat_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
<p>So here we see that there are many different kinds of data in your dataframe. As an analyst this might be a depressing finding. Compare this to <code>vis_dat</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_dat.html">vis_dat</a></span>(messy_df)</code></pre></div>
<p><img src="using_visdat_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
<p>Where you&rsquo;d just assume your data is wierd because it&rsquo;s all factors - or worse, not notice that this is a problem.</p>
<p>At the moment <code>vis_guess</code> is very slow. Please take this into consideration when you are using it on data with more than 1000 rows. We&rsquo;re looking into ways of making it faster, potentially using methods from the <code>parallel</code> package, or extending the c++ code from <code>readr:::collectorGuess</code>.</p>
</div>
</div>
<div id="interactivity" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#interactivity" class="anchor"> </a></body></html>Interactivity</h1>
<p>Thanks to Carson Sievert, you can now add some really nifty interactivity into visdat by using <code>plotly::ggplotly</code>, allowing for information to be revealed upon mouseover of a cell. The code to do this can be seen below, but is not shown as the github README doesn&rsquo;t support HTML interactive graphics&hellip;yet.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(plotly)

<span class="kw"><a href="../reference/vis_dat.html">vis_dat</a></span>(airquality) %&gt;%<span class="st"> </span><span class="kw">ggplotly</span>()</code></pre></div>
</div>
<div id="road-map" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#road-map" class="anchor"> </a></body></html>Road Map</h1>
<p><strong>visualising expectations</strong></p>
<p>The idea here is to pass expectations into <code>vis_dat</code> or <code>vis_miss</code>, along the lines of the <code>expectation</code> command in <code>assertr</code>. For example, you could ask <code>vis_dat</code> to identify those cells with values of -1 with something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">expect</span>(value ==<span class="st"> </span>-<span class="dv">1</span>) %&gt;%
<span class="st">  </span>vis_dat</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked"><li><a href="#visdat">visdat</a></li>
      <li><a href="#what-does-visdat-do">What does visdat do?</a></li>
      <li><a href="#how-to-install">How to install</a></li>
      <li><a href="#examples">Examples</a><ul class="nav nav-pills nav-stacked"><li><a href="#using-vis_dat">Using <code>vis_dat</code></a></li>
      <li><a href="#using-vis_miss">using <code>vis_miss</code></a></li>
      <li><a href="#using-vis_guess">using <code>vis_guess</code></a></li>
      </ul></li>
      <li><a href="#interactivity">Interactivity</a></li>
      <li><a href="#road-map">Road Map</a></li>
      </ul></div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Nicholas Tierney.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer></div>

  </body></html>
