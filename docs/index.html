<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Preliminary Visualisation of Data • visdat</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">visdat</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="visdat" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#visdat" class="anchor"> </a>visdat</h1></div>
<!-- add a TravisCI badge -->
<!-- Add an appVeyor badge -->

</div>
<div id="how-to-install" class="section level1">
<h1 class="hasAnchor">
<a href="#how-to-install" class="anchor"> </a>How to install</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>

devtools::<span class="kw">install_github</span>(<span class="st">"njtierney/visdat"</span>)</code></pre></div>
</div>
<div id="what-does-visdat-do" class="section level1">
<h1 class="hasAnchor">
<a href="#what-does-visdat-do" class="anchor"> </a>What does visdat do?</h1>
<p>Initially inspired by <a href="https://github.com/setosa/csv-fingerprint"><code>csv-fingerprint</code></a>, <code>vis_dat</code> helps you visualise a dataframe and “get a look at the data” by displaying the variable classes in a dataframe as a plot with <code>vis_dat</code>, and getting a brief look into missing data patterns <code>vis_miss</code>.</p>
<p>The name <code>visdat</code> was chosen as I think in the future it could be integrated with <a href="https://github.com/ropensci/testdat"><code>testdat</code></a>. The idea being that first you visualise your data (<code>visdat</code>), then you run tests from <code>testdat</code> to fix them.</p>
<p>There are two main commands in the <code>visdat</code> package: - <code><a href="reference/vis_dat.html">vis_dat()</a></code> - <code><a href="reference/vis_miss.html">vis_miss()</a></code></p>
<ul>
<li><p><code><a href="reference/vis_dat.html">vis_dat()</a></code> visualises a dataframe showing you what the classes of the columns are, and also displaying the missing data.</p></li>
<li><p><code><a href="reference/vis_miss.html">vis_miss()</a></code> visualises just the missing data, and allows for missingness to be clustered and columns rearranged. <code><a href="reference/vis_miss.html">vis_miss()</a></code> is similar to <code>missing.pattern.plot</code> from the <code>mi</code> package. Unfortunately <code>missing.pattern.plot</code> is no longer in the <code>mi</code> package (well, as of 14/02/2016).</p></li>
</ul>
<p>There are two some experimental functions:</p>
<ul>
<li><code><a href="reference/vis_guess.html">vis_guess()</a></code></li>
<li><p><code><a href="reference/vis_compare.html">vis_compare()</a></code></p></li>
<li><p><code><a href="reference/vis_guess.html">vis_guess()</a></code> has a guess at what the value of each cell, using <code>readr::parse_guess</code>. This means that “10.1” will return “double”, and <code>10.1</code> will return “double”, and <code>01/01/01</code> will return “date”. Keep in mind that it is a <strong>guess</strong> at what each cell is, so you can’t trust this fully.</p></li>
<li><p><code><a href="reference/vis_compare.html">vis_compare()</a></code> compares two dataframes, displaying the differences.</p></li>
</ul>
</div>
<div id="examples" class="section level1">
<h1 class="hasAnchor">
<a href="#examples" class="anchor"> </a>Examples</h1>
<div id="using-vis_dat" class="section level2">
<h2 class="hasAnchor">
<a href="#using-vis_dat" class="anchor"> </a>Using <code><a href="reference/vis_dat.html">vis_dat()</a></code>
</h2>
<p>Let’s see what’s inside the dataset <code>airquality</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">library</span>(visdat)

<span class="kw"><a href="reference/vis_dat.html">vis_dat</a></span>(airquality)</code></pre></div>
<p><img src="README-vis-dat-aq-1.png" width="672"></p>
<p>The classes are represented on the legend, and missing data represented by grey.</p>
<p>by default, <code>vis_dat</code> sorts the columns according to the type of the data in the vectors. You can turn this off by setting <code>sort_type == FALSE</code>. This feature is better illustrated using the <code>airquality</code> dataset from base R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/vis_dat.html">vis_dat</a></span>(airquality, 
        <span class="dt">sort_type =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="README-vis-dat-aq-sort-type-1.png" width="672"></p>
<p>The plot above tells us that R reads this dataset as having characters, and integer values, along with some missing data in <code>Ozone</code> and <code>Solar.R</code>.</p>
<div id="with-different-data" class="section level3">
<h3 class="hasAnchor">
<a href="#with-different-data" class="anchor"> </a>with different data</h3>
<p>To demonstrate what visdat looks like when you have different kinds of data, we can look at the <code>typical_data</code> from within visdat, created using the excellent <a href="https://github.com/trinker/wakefield"><code>wakefield package</code></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/vis_dat.html">vis_dat</a></span>(typical_data)
<span class="co">#&gt; Warning: attributes are not identical across measure variables; they will</span>
<span class="co">#&gt; be dropped</span></code></pre></div>
<p><img src="README-vis-dat-typical-data-1.png" width="672"></p>
<p>We can also look into using even wider data, looking at <code>typical_larger_data</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/vis_dat.html">vis_dat</a></span>(typical_larger_data)
<span class="co">#&gt; Warning: attributes are not identical across measure variables; they will</span>
<span class="co">#&gt; be dropped</span></code></pre></div>
<p><img src="README-vis-dat-typical-larger-data-1.png" width="672"></p>
</div>
</div>
<div id="using-vis_miss" class="section level2">
<h2 class="hasAnchor">
<a href="#using-vis_miss" class="anchor"> </a>using <code><a href="reference/vis_miss.html">vis_miss()</a></code>
</h2>
<p>We can explore the missing data further using <code><a href="reference/vis_miss.html">vis_miss()</a></code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/vis_miss.html">vis_miss</a></span>(airquality)</code></pre></div>
<p><img src="README-vis-miss-aq-1.png" width="672"></p>
<p>The percentages of missing/complete in <code>vis_miss</code> are accurate to 1 decimal place.</p>
<p>You can cluster the missingness by setting <code>cluster = TRUE</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/vis_miss.html">vis_miss</a></span>(airquality, 
         <span class="dt">cluster =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="README-vis-miss-aq-cluster-1.png" width="672"></p>
<p>The columns can also just be arranged by columns with most missingness, by setting <code>sort_miss = TRUE</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/vis_miss.html">vis_miss</a></span>(airquality,
         <span class="dt">sort_miss =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="README-vis-miss-aq-sort-miss-1.png" width="672"></p>
<p>When there is &lt;0.1% of missingness, <code>vis_miss</code> indicates that there is &gt;1% missingness.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
test_miss_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x1 =</span> <span class="dv">1</span>:<span class="dv">10000</span>,
                           <span class="dt">x2 =</span> <span class="kw">rep</span>(<span class="st">"A"</span>, <span class="dv">10000</span>),
                           <span class="dt">x3 =</span> <span class="kw">c</span>(<span class="kw">rep</span>(1L, <span class="dv">9999</span>), <span class="ot">NA</span>))

<span class="kw"><a href="reference/vis_miss.html">vis_miss</a></span>(test_miss_df)
<span class="co">#&gt; Warning: attributes are not identical across measure variables; they will</span>
<span class="co">#&gt; be dropped</span></code></pre></div>
<p><img src="README-vis-miss-test-1.png" width="672"></p>
<p><code>vis_miss</code> will also indicate when there is no missing data at all</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/vis_miss.html">vis_miss</a></span>(mtcars)</code></pre></div>
<p><img src="README-vis-miss-mtcars-1.png" width="672"></p>
</div>
</div>
<div id="experimental-features" class="section level1">
<h1 class="hasAnchor">
<a href="#experimental-features" class="anchor"> </a>Experimental features</h1>
<div id="using-vis_compare" class="section level2">
<h2 class="hasAnchor">
<a href="#using-vis_compare" class="anchor"> </a>using <code><a href="reference/vis_compare.html">vis_compare()</a></code>
</h2>
<p>Sometimes you want to see what has changed in your data. <code><a href="reference/vis_compare.html">vis_compare()</a></code> helps with that. It is currently only just barely working, so keep in mind that this is very much in its beta stages.</p>
<p>For the sake of simplicity, lets make some changes to <code>iris</code>, and compare this new dataset</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
iris_diff &lt;-<span class="st"> </span>iris
iris_diff[<span class="kw">sample</span>(<span class="dv">1</span>:<span class="dv">150</span>, <span class="dv">30</span>),<span class="kw">sample</span>(<span class="dv">1</span>:<span class="dv">4</span>, <span class="dv">2</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span>

<span class="kw"><a href="reference/vis_compare.html">vis_compare</a></span>(iris_diff, iris)
<span class="co">#&gt; Warning in vis_compare(iris_diff, iris): vis_compare is still in BETA!</span>
<span class="co">#&gt; If you have suggestions or errors, post an issue at https://github.com/</span>
<span class="co">#&gt; njtierney/visdat/issues</span>
<span class="co">#&gt; Warning in if (dim(df1) != dim(df2)) {: the condition has length &gt; 1 and</span>
<span class="co">#&gt; only the first element will be used</span>
<span class="co">#&gt; Warning: attributes are not identical across measure variables; they will</span>
<span class="co">#&gt; be dropped</span>

<span class="co">#&gt; Warning: attributes are not identical across measure variables; they will</span>
<span class="co">#&gt; be dropped</span></code></pre></div>
<p><img src="README-vis-compare-iris-1.png" width="672"></p>
<p>Here the differences are marked in red.</p>
<p>If you try and compare differences when the dimensions are different, you get an ugly error.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
iris_diff_2 &lt;-<span class="st"> </span>iris
iris_diff_2$new_col &lt;-<span class="st"> </span>iris$Sepal.Length +<span class="st"> </span>iris$Sepal.Width

<span class="kw"><a href="reference/vis_compare.html">vis_compare</a></span>(iris, iris_diff_2)
<span class="co">#&gt; vis_compare is still in BETA! If you have suggestions or errors, post an issue at https://github.com/njtierney/visdat/issuesthe condition has length &gt; 1 and only the first element will be usedError: `.x` (5) and `.y` (6) are different lengths</span></code></pre></div>
</div>
<div id="using-vis_guess" class="section level2">
<h2 class="hasAnchor">
<a href="#using-vis_guess" class="anchor"> </a>using <code><a href="reference/vis_guess.html">vis_guess()</a></code>
</h2>
<p><code><a href="reference/vis_guess.html">vis_guess()</a></code> takes a guess at what each cell is. It’s best illustrated using some messy data, which we’ll make here.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
messy_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>,
                  T,
                  <span class="st">"TRUE"</span>,
                  <span class="st">"T"</span>,
                  <span class="st">"01/01/01"</span>,
                  <span class="st">"01/01/2001"</span>,
                  <span class="ot">NA</span>,
                  <span class="ot">NaN</span>,
                  <span class="st">"NA"</span>,
                  <span class="st">"Na"</span>,
                  <span class="st">"na"</span>,
                  <span class="st">"10"</span>,
                  <span class="dv">10</span>,
                  <span class="st">"10.1"</span>,
                  <span class="fl">10.1</span>,
                  <span class="st">"abc"</span>,
                  <span class="st">"$%TG"</span>)

<span class="kw">set.seed</span>(<span class="dv">1114</span>)
messy_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">var1 =</span> messy_vector,
                       <span class="dt">var2 =</span> <span class="kw">sample</span>(messy_vector),
                       <span class="dt">var3 =</span> <span class="kw">sample</span>(messy_vector))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/vis_guess.html">vis_guess</a></span>(messy_df)
<span class="co">#&gt; Warning in vis_guess(messy_df): vis_guess is still in BETA! If you have</span>
<span class="co">#&gt; suggestions or errors, post an issue at https://github.com/njtierney/</span>
<span class="co">#&gt; visdat/issues</span></code></pre></div>
<p><img src="README-vis-guess-messy-df-1.png" width="672"></p>
<p>So here we see that there are many different kinds of data in your dataframe. As an analyst this might be a depressing finding. Compare this to <code>vis_dat</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/vis_dat.html">vis_dat</a></span>(messy_df)</code></pre></div>
<p><img src="README-visdat-messy-df-1.png" width="672"></p>
<p>Where you’d just assume your data is wierd because it’s all factors - or worse, not notice that this is a problem.</p>
<p>At the moment <code>vis_guess</code> is very slow. Please take this into consideration when you are using it on data with more than 1000 rows. We’re looking into ways of making it faster, potentially using methods from the <code>parallel</code> package, or extending the c++ code from <code>readr:::collectorGuess</code>.</p>
</div>
</div>
<div id="interactivity" class="section level1">
<h1 class="hasAnchor">
<a href="#interactivity" class="anchor"> </a>Interactivity</h1>
<p>Thanks to Carson Sievert, you can now add some really nifty interactivity into visdat by using <code>plotly::ggplotly</code>, allowing for information to be revealed upon mouseover of a cell. The code to do this can be seen below, but is not shown as the github README doesn’t support HTML interactive graphics…yet.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">library</span>(plotly)

<span class="kw"><a href="reference/vis_dat.html">vis_dat</a></span>(airquality) %&gt;%<span class="st"> </span><span class="kw">ggplotly</span>()</code></pre></div>
<div id="vis_dat_ly" class="section level2">
<h2 class="hasAnchor">
<a href="#vis_dat_ly" class="anchor"> </a>vis_dat_ly</h2>
<p>This is still under development, but it is basically a faster version of doing a ggplot and then calling ggplotly.</p>
</div>
<div id="vis_miss_ly" class="section level2">
<h2 class="hasAnchor">
<a href="#vis_miss_ly" class="anchor"> </a>vis_miss_ly</h2>
<p>This is also just brand new under development, but should prove interesting once I fix up the legend, etc.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/vis_miss_ly.html">vis_miss_ly</a></span>(airquality)</code></pre></div>
</div>
</div>
<div id="road-map" class="section level1">
<h1 class="hasAnchor">
<a href="#road-map" class="anchor"> </a>Road Map</h1>
<p><strong>visualising expectations</strong></p>
<p>The idea here is to pass expectations into <code>vis_dat</code> or <code>vis_miss</code>, along the lines of the <code>expectation</code> command in <code>assertr</code>. For example, you could ask <code>vis_dat</code> to identify those cells with values of -1 with something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
data %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">expect</span>(value ==<span class="st"> </span>-<span class="dv">1</span>) %&gt;%
<span class="st">  </span>vis_dat</code></pre></div>
</div>
<div id="thank-yous" class="section level1">
<h1 class="hasAnchor">
<a href="#thank-yous" class="anchor"> </a>Thank yous</h1>
<p>Thank you to Ivan Hanigan who <a href="http://www.njtierney.com/r/missing%20data/rbloggers/2015/12/01/ggplot-missing-data/#comment-2388263747">first commented</a> this suggestion after I made a blog post about an initial prototype <code>ggplot_missing</code>, and Jenny Bryan, whose <a href="https://twitter.com/JennyBryan/status/679011378414268416">tweet</a> got me thinking about vis_dat, and for her code contributions that removed a lot of errors.</p>
<p>Thank you to Hadley Wickham for suggesting the use of the internals of <code>readr</code> to make <code>vis_guess</code> work.</p>
<p>Thank you to Miles McBain for his suggestions on how to improve vis guess. This resulted in making it at least 2-3 times faster.</p>
<p>Thanks also to Carson Sievert for writing the code that combined plotly with visdat, and for Noam Ross for suggesting this in the first place.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="https://github.com/njtierney/visdat/issues">https://​github.com/​njtierney/​visdat/​issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nicholas Tierney <br><small class="roles"> Author, maintainer </small> </li>
</ul>
<html><body>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/njtierney/visdat">
  <img src="https://travis-ci.org/njtierney/visdat.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/njtierney/visdat">
  <img src="https://ci.appveyor.com/api/projects/status/github/njtierney/visdat?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/njtierney/visdat?branch=master">
  <img src="https://img.shields.io/codecov/c/github/njtierney/visdat/master.svg" alt="Coverage Status"></a></li>
</ul>
</body></html>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Nicholas Tierney.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
